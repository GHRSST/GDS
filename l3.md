---
jupytext:
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
---
(l3)=

<a id="section10"></a>

# 10 Level 3 (L3) Product Specification

<a id="section10.1"></a>

## 10.1 Overview description of the GHRSST L3 data product
GHRSST L3 data have been introduced to provide users with gridded, synthetic, and potentially adjusted SST products, bringing added value with respect to the original L2P but still allowing traceability to the original dataset. GHRSST L3 products do not use analysis or interpolation procedure to fill gaps where no observations are available. The GHRSST L3 products include:

- **Un-collated** data that represent a straightforward remapping of L2P GHRSST data granules to a space grid without combining any observations from overlapping orbits or times. Although in principle these data may or may not be adjusted to a reference sensor, in practice the un-collated L3 will normally be a remapped L2P dataset. For remapping best practices, see [Section 10.31](#section10.31). 
- **Collated** data that grid observations from a single instrument and a single platform into space and/or time bins. These data may or may not be adjusted to a reference sensor. For collating best practices see [Section 10.32](#section10.32) and for adjustment best practices see [Section 10.33](#section10.33). 
-	**Super-collated** data that combine observations from a multiple instruments into a space-time grid. In this case, the adjustment to a common reference is necessary to avoid heterogeneities in the resulting field. For best practices concerning the creation of super collated files see [Section 10.34](#section10.34).

As a result, the format of a L3 file will be able to cope with the three kinds of L3 SST presented above. The L3 format will include the following parts:

1) **In case the L3 is un-adjusted, a mandatory section containing the original L2P information** remapped onto the grid point: the original sea surface temperature, quality level and SSES information. An optional section including the remapping condition information may also be provided. These files are essentially gridded L2P files.
2) **In case the L3 is adjusted to a reference**, the adjusted SST value must be provided, together with the local bias to the reference, the error generated by the adjustment processing, and the overall error resulting from the combination of the SSES and the adjustment processing error.
3)	**In case the L3 is super-collated**, the source of SST at each pixel is mandatory.

**Un-adjusted files**: In the case of **un-collated or collated un-adjusted L3 files** the L3 file is derived from L2P data by a remapping process. The remapping and collating best practices are given in the [Section 10.31 Best Practices for Remapping Level 2 Data to a Fixed Grid](#section10.31). Their content is thus identical to that of the L2P, but complementary, optional information on the remapping conditions may be provided.

**Adjusted files**: Collated files may or may not be adjusted, but a super-collated file is necessarily adjusted. The super-collating and adjustment best practices are described in [Section 10.32 Best Practices for Collating Data from the Same Sensor and Platform](#section10.32) and [Best Practices for Adjustments](#section10.33). The principle governing this format is to allow traceability to the original L2P, while providing the best-adjusted SST value. A first section (**in blue in Table 10**) reproduces the original L2P SST and SSES information as in the un-adjusted version. The reference used to adjust the SST must be given in the “reference” attribute of the adjusted_sea_surface_temperature variable. The adjusted SST and some error information are also mandatory. This information **in yellow** in [Table 10-1](#table10-1) is: 

-	**adjusted_standard_deviation_error**: the total error resulting from the combination of the SSES error and the adjustment procedure error, **standard_deviation_to_reference_sst**.
-	**bias_to_reference_sst**: the local value of the estimated difference between the original SST and the reference SST
-	**standard_deviation_to_reference_sst**: an estimate of the error resulting from the adjustment procedure. If the procedure consists of analysing a field of differences of original SST and reference SST, the **standard_deviation_to_reference_sst** will be the error of this analysis.

The GHRSST Science Team determined that 5 mandatory fields will form the core data content of a GHRSST L3 data file. In addition to global attributes and geo-location information, RDACs must produce the following within a L3 file:

- Sea Surface temperature data (SST),
- Time of SST measurement,
- Bias and Standard Deviation error estimates for SST data,
- Data quality.

There are a number of optional fields that may be used at the data provider’s discretion that will form the core data content of a GHRSST data file (table 10-1)".

For every L3 file that is generated, appropriate ISO metadata (**specified in Overview description of the GMPE data product see Section 12.1**) must also be created and registered at the GHRSST Master Metadata Repository (MMR) system. The GHRSST L3 file contents are summarized in [Table 10-1](#table10-1) below.

<a id="table10-1"></a>

#### Table 10-1 Summary description of the contents within a GHRSST L3 data product

| Description                                               | Required  | Relevant Section  |
|-----------------------------------------------------------|-----------|-------------------|
| Dimensions (e.g., i x j x k)                              | Mandatory | Section 8         |
| Global attributes                                         | Mandatory | Section 8.2       |
| [i *x* j *x* k] geolocation data                          | Mandatory | Section 8.4       |
| [i *x* j *x* k] array of SST data                         | Mandatory | Section 9.3       |
| [i *x* j *x* k] array of **sst_dtime** data               | Mandatory | Section 9.4       |
| [i *x* j *x* k] array of **sses_bias** data               | Mandatory | Section 9.5       |
| [i *x* j *x* k] array of **sses_standard_deviation** data | Mandatory | Section 9.6       |
| [i *x* j *x* k] array of **quality_level** data           | Mandatory | Section 9.18      |
| [i *x* j *x* k] array of optional/experimental data       | Optional  | Section 9.24      |

<a id="section10.2"></a>

## 10.2 L3 data record format specification

<a id="section10.31"></a>

This table provides an overview of the GHRSST L3 product pixel data record that should be created for each input data. Within GHRSST L3 data files, there are many variables that are defined identically to their L2P counterparts. In addition, there are several variables that are unique to L3. Both types are listed below in [Table 10-2](#table10-2). In the following sections, each variable within the L3 data file that is unique to L3 is described in detail.

<a id="table10-2"></a>

#### Table 10 2 L3 SST data record content

| Variable Name (Defintion Section, CDL Example)            | Description            | Unit type  |
|-----------------------------------------------------------|------------------------|------------|
| **sea_surface_temperature** (Section 9.3, Table 9-3)| SST measurement values from input L2 satellite data set. L2 SST data are not adjusted in any manner and are identical to the input data set. Use attribute 'sea_surface_temperature:source = "< code from Section 7.9, Error! Reference source not found.>" to specify the L2 input product source.|kelvin int|
|sst_dtime (Section 10.4, Table 9 5)| Deviation in time of SST measurement from reference time stored in the netCDF global variable time (defined as the start time of granule for L3U and the centre time of the collation window for L3C and L3S). Minimum resolution should be one second.|seconds long|
| sses_bias (Section 9.5,  Data producers are reminded to choose appropriate scale_factors and add_offsets for their data, and to strive for scale_factors as close to 0.01 as possible without “oversaturating” the values. Table 9 6)| Sensor Specific Error Statistic (SSES) bias error estimate generated by data provider. The specific SSES methodology should be described in L2P documentation from the data provider. The GHRSST ST-VAL TAG will maintain a summary document of all SSES schemes at http://www.ghrsst.org/STVAL-TAG-SSES-Schemes.html| kelvin byte|
|sses_standard_deviation (Section 9.6, Table 9 7)| SSES standard deviation uncertainty generated by data provider. The specific SSES methodology should be described in L2P documentation from the data provider. The GHRSST ST-VAL TAG will maintain a summary document of all SSES schemes at http://www.ghrsst.org/STVAL-TAG-SSES-Schemes.html| kelvin byte|
|dt_analysis (Section 9.7, Table 9 9)|The difference between input SST and a GHRSST L4 SST analysis from the previous 24 hour period. The GHRSST L4 analysis chosen for a given L2P data set variable should be consistent for all L2P products as far as practically possible. If no L4 analysis is available then an alternative L4 analysis or a reference mean SST climatology may be used. If storage as *byte* does not allow the provider to offer the full precision required for this field, storage as a *short* is optionally permitted though *byte* is preferred.|kelvin byte (or short)|
|wind_speed (Section 9.8, Table 9 10)|10 m surface wind speed near contemporaneous to the input SST measurement from satellite or analysis. Wind speed data should be provided at a minimum resolution of 1 ms-1 and data producers shall use scale_factor and add_offset to scale data to an appropriate resolution (higher resolution is better). The difference in time between SST measurement and wind_speed data shall be recorded in the L2P variable wind_speed_dtime_from_sst. If multiple sources of wind speed data are used, the variable source_of_wind_speed shall be used to indicate their source following the format requirements shown Section 7.9. Units of multiple sources of information shall be identical. If a unique source is used (this is recommended) the attribute ‘wind_speed:source = “< string defined following best practice in Section 7.9>” is considered sufficient.| ms<sup>-1</sup> byte|
|**<sub>win_speed_dtime_from_sst</sub>** (Section 9.9, Table 9 11)|Time difference of wind_speed data from input L2 SST measurement specified in hours. Units of multiple sources of information shall be identical.|Hours byte|
|**<sub>source_of_wind_speed</sub>** (Section 9.10, Table 9 12)|When multiple sources of wind speed data are used in the variable wind_speed, the variable source_of_wind_speed shall be used to record the source of the wind speed data used. Units of multiple sources of information shall be identical. If a unique source of wind speed data is used (this is recommended) the variable attribute 'wind_speed:source = "<string defined following best practice defined in Section 7.9>" shall be sufficient and the variable source_of_wind_speed Is not required.|Code byte|
|**<sub>sea_ice_fraction</sub>** (Section 9.11, Table 9 13)|Fractional Sea Ice contamination data. Ranges from 0 to 1. This field is only required if there is actually sea ice in the input L2 data set. Do not provide an array of missing data values. When multiple sources of sea ice fraction data are used in the variable sea_ice_fraction, the variable source_of_sea_ice_fraction shall be used to record the source of the sea ice fraction data used and the difference in time between SST measurement and sea_ice_fraction data shall be recorded in the variable sea_ice_fraction_dtime_from_sst. Units of multiple sources of information shall be identical. If a unique source of sea ice fraction data is used (this is recommended), the variable attribute 'sea_ice_fraction:source = "< string defined following best practice defined in Section 7.9>" and an attribute sea_ice_fraction:time_offset = “difference time in hours” are considered sufficient and the variables source_of_sea_ice_fraction and sea_ice_fraction_dtime_from_sst are not required. |Percent byte|
|**<sub>sea_ice_fraction_dtime_from_sst</sub>** (Section 9.12, Table 9 14)|Time difference of sea_ice_fraction data from input L2 SST measurement specified in hours. This variable is mandatory when multiple sources of sea_ice_fraction are used. If only one source is used and the values all have one time, simply set a variable attribute sea_ice_fraction:time_offset = “difference time in hours”.|Hours byte|
|**<sub>source_of_sea_ice_fraction</sub>** (Section 9.13, Table 9 15)|When multiple sources of sea ice fraction data are used in the variable sea_ice_fraction, the variable source_of_sea_ice_fraction shall be used to record the source of the sea ice fraction data used. Units of multiple sources of information shall be identical. If a unique source of sea ice fraction data is used (this is recommended), the variable attribute 'sea_ice_fraction:source = "< string defined following best practice defined in Section 7.9>" is sufficient and the variable source_of_sea_ice_fraction is not needed.|Code byte|
|**<sub>aerosol_dynamic_indicator</sub>** (Section 9.14, Table 9 16)|The variable aerosol_dynamic_indicator (ADI) is used to indicate the presence of atmospheric aerosols that may cause errors in the atmospheric correction of infrared satellite data when retrieving SST. The variable aerosol_dynamic_indicator is mandatory only when the input SST data set has been derived from an infrared satellite instrument. The atmospheric aerosol data used to fill the variable aerosol_dynamic_indicator is chosen by the data provider as the most appropriate aerosol indicator for a given input SST data set. (e.g., SDI might be used for MSG SEVIRI, a view difference might be used for AATSR, and aerosol optical depth may be used from a model or another satellite system). When multiple sources of atmospheric aerosol indicator data are used in the variable aerosol_dynamic_indicator , the variable source_of_sea_aerosol_dynamic_indicator shall be used to record the source of the aerosol indicator data used. Units of multiple sources of information shall be identical. If a unique source of atmospheric aerosol indicator data is used (this is recommended), the variable attribute 'aerosol_dynamic_indicator:source = "< string defined following best practice defined in Section 7.9>" is sufficient and the variable source_of_aerosol_dynamic_indicator Is not required. If only one source is used and the values all have one time, simply set a variable attribute sea_ice_fraction:time_offset = “difference time in hours”. |Scaled value byte|
|**<sub>adi_dtime_from_sst</sub>** (Section 9.15, Table 9 17)|The time difference between the aerosol_dynamic_indicator value and SST measurement recorded in hours.|Hours byte|
|**<sub>source_of_adi</sub>** (Section 9.16, Table 9 18)|When multiple sources of atmospheric aerosol indicator data are used in the variable aerosol_dynamic_indicator, the variable source_of_sea_aerosol_dynamic_indicator shall be used to record the source of the aerosol indicator data used. If a unique source of atmospheric aerosol indicator data is used (this is recommended), the variable attribute 'aerosol_dynamic_indicator:source = "<string defined following best practice defined in Section 7.9>" is sufficient and the variable source_of_aerosol_dynamic_indicator Is not required.|Code byte|
|**<sub>l2p_flags</sub>** (Section 9.17, Table 9 20)|The variable l2p_flags is used to (a) specify the type of input SST data (either infrared or passive microwave instrument derived), (b) pass through native flags from the input L2 SST data set and (c) record any additional information considered important for the user of an L3 data set. The variable l2p_flags is split into two sections: the first 6 bits of the L2P variable l2p_flags are generic flags that are common to all L3 data files; bits 6-15 are defined by the L3 data provider and are specific to each L3 input data stream. The tables below define the bit field and their meanings. <table border="1"><tr><td>**Bit**</td> <td>**Common Flags**</td></tr><tr><td>0</td><td>Passive microwave data</td></tr><tr><td>1</td><td>Land</td></tr><tr><td>2</td><td>Ice</td></tr><tr><td>3</td><td>Lake (if known)</td></tr><tr><td>4</td><td>River (if known)</td></tr><tr><td>5</td><td>Spare</td></tr></table> <table border="1"><tr><td>**Bit**</td> <td>**l2p_flags definition**</td></tr><tr><td>6-15</td><td>Defined by L2 data provider and described in the flag_meanings, and flag_masks variable attributes. Please refer to L2P data provider documentation</td></tr></table> |Flags int|
|**<sub>quality_level</sub>** (Section 9.18, Table 9 21)|The variable quality_level is used to provide an overall indication of L3 data quality. Variable quality_level will reflect CEOS QA4EO (Quality Indicator) guidelines. An incremental scale from 0 no data, 1 (bad e.g. cloud, rain, to close to land – under no conditions use this data) 2 (worst quality usable data), to 5 (best quality usable data) shall be used.|Code byte|
|or_latitude (Section 10.20, Table 10 3)|Original latitude of the satellite measurement as provided in the L2P|Degree short|
|or_longitude (Section 10.21, Table 10 4) |Original longitude of the satellite measurement as provided in the L2P |Degree short|
|or_number_of_pixels (Section 10.22, Table 10 5)|Number of original pixels from the L2P contributing to the binned (space and/or time) average|Number short|
|sum_sst (Section 10.23, Table 10 6) |Sum of the pixel values going into the space and/or time bin |kelvin float|
|sum_square_sst (Section 10.24, Table 10 7) |Sum of the pixel value squares going into the space and/or time bin |kelvin2 float|
|adjusted_sea_surface_temperature (Section 10.25, Table 10 8) |SST adjusted to the reference. Mandatory for adjusted type file |kelvin short|
|adjusted_standard_deviation_error (Section 10.26, Table 10 9)|Total error standard deviation estimate derived from SSES and adjustment method. Mandatory for adjusted type file |kelvin byte|




























## Best Practices for Remapping Level 2 Data to a Fixed Grid 

<a id="section10.32"></a>

## Best Practices for Collating Data from the Same Sensor and Platform 

<a id="section10.33"></a>

## Best Practices for Adjustments 

<a id="section10.34"></a>

## Best Practices for Super-Collating Data from Multiple Sensors and Platforms
